<div class="find-doctors-container">
  <header class="page-header">
    <h1>Find Doctors</h1>
    <p>Search for healthcare professionals</p>
  </header>

  <div class="search-section">
    <div class="search-filters">
      <input
        type="text"
        [(ngModel)]="searchFilters.name"
        placeholder="Doctor name"
        (keyup.enter)="searchDoctors()"
        class="search-input"
      />

      <select [(ngModel)]="searchFilters.specialty" (change)="searchDoctors()" class="search-select">
        <option value="">All Specializations</option>
        <option *ngFor="let spec of specialties" [value]="spec">
          {{ spec }}
        </option>
      </select>

      <input
        type="text"
        [(ngModel)]="searchFilters.practiceName"
        placeholder="Practice name"
        (keyup.enter)="searchDoctors()"
        class="search-input"
      />

      <button (click)="searchDoctors()" class="btn-primary">Search</button>
      <button (click)="findNearbyDoctors()" class="btn-secondary">Near Me</button>
      <button (click)="clearFilters()" class="btn-link">Clear</button>
    </div>
  </div>

  <div *ngIf="loading" class="loading">Searching doctors...</div>

  <div class="doctors-grid">
    <div *ngFor="let doctor of doctors" class="doctor-card">
      <div class="doctor-image">
        <img [src]="doctor.profilePictureUrl || 'assets/default-doctor.png'" [alt]="doctor.firstName">
      </div>

      <div class="doctor-info">
        <h3>Dr. {{ doctor.firstName }} {{ doctor.lastName }}</h3>
        <p class="specialty">{{ doctor.specializations[0].name || 'General Practice' }}</p>

        <div class="doctor-meta">
          <span class="rating">‚≠ê {{ doctor.rating || 'N/A' }}</span>
          <span class="experience">{{ doctor.yearsOfExperience }}+ years</span>
        </div>

        <p class="location">{{ doctor.address.city }}, {{ doctor.address.province }}</p>
        <p class="fee">Consultation: R{{ doctor.consultationFees }}</p>
      </div>

      <div class="card-actions">
        <button (click)="viewDoctorProfile(doctor.id)" class="btn-view">View Profile</button>
        <button (click)="bookAppointment(doctor.id)" class="btn-book">Book Appointment</button>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && doctors.length === 0" class="empty-state">
    <p>No doctors found. Try adjusting your search criteria.</p>
  </div>
</div>
